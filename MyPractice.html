<!DOCTYPE html>
<html>
<body>
<!-- JavaScript Promise -->
<h3>JavaScript Promise</h3>

<p id="demo"></p>
<p id="app1"></p>

<!-- Ex 1 -->
<script>
function myDisplayer(some) {
  document.getElementById("demo").innerHTML = some;
}

let myPromise = new Promise(function(myResolve, myReject) {

let x = 0;

//Producing Code

  if (x == 0) {
    myResolve("OKay");
  } else {
    myReject("Error");
  }
});

//Consuming code
myPromise.then(
  function(value) {
    myDisplayer(value);
  },
  function(error) {
    myDisplayer(error);
  }
);
  //or

//Consuming code
// myPromise.then(
//   function(value) {
//     myDisplayer(value);
//   }).catch( function(error) {
//     myDisplayer(error);
//   });
</script>

<!-- Ex 2 -->
<script>

  const applyDiscount = new Promise(function(resolve, reject){
    //Producing  Logic
  let discount = false;

  if (discount){
    resolve("Discount activated");
  }else{
    reject('Discount Not Applied!')
  }
  });

  //Consuming Logic
applyDiscount.then(function(value){
console.log(value)
}).catch(function(value){
  console.log(value)

});

</script>

<!-- TEMPLATE LITERALS -->

<div id="app"></div>
<script>

 
const product1 = 'Pizza';
const price1 = 30;
const product2 = 'Hamburger';
const price2 = 40;

// Old Method
let html;
html  = '<ul>'+
        '<li>Item: ' + product1 + '</li>' +
        '<li>Price: $ ' + price1 + '</li>' +
        '<li>Item: ' + product2 + '</li>' +
        '<li>Price: $ ' + price2 + '</li>' +
        '<li>Total: $' + (price1 + price2) + '</li>';
        '</ul>';

// New method using Template Strings / Template Literals - they use back-ticks (``) to define a string:
html = `
    <ul>
        <li>Item: ${product1}</li>
        <li>Price: ${price1}</li>
        <li>Item: ${product2}</li>
        <li>Price: ${price2}</li>
        <li>Total: ${total(price1, price2)}</li>
    </ul>
`;

function total(param1, param2) {
    return param1 + param2;
}

// HTML to inject the code

let app = document.querySelector('#app');
app.innerHTML = html ;
</script>

<!-- Callbacks -->

<h3>Callbacks</h3>
<div id="callback"></div>
<script>

const countries = ['USA','Ken','Ug','Tz'];
//Ex 1
//Inline Callbacks- without names
countries.forEach(function(args){
		  console.log(args)
      //document.getElementById('callback').innerText = args;
	  });

//Ex 2
//Callback with function declarion
function callback(args) {
  console.log(args)
}
countries.forEach(callback)

//Ex 3
//Display Countries after 1 second
function displayCountries(){
  setTimeout(function() {
    let html = '';
    countries.forEach(function(country){
    html += `<li>${country}</li>`
});
document.getElementById('callback').innerHTML = html;
  }, 1000);

}  
//print countries
displayCountries();

//Add new Country after 2 sec
function newCountry(country, callback3){
  setTimeout(function() {
    //Add new Country to the end
    countries.push(country)
    //Execute the call back
    callback3();
  }, 2000);
}
//Display Countries with newly added country
newCountry('France', displayCountries);


</script>


</body>
</html>
